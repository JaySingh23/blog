title: Extended Absence
date: 2018-10-06 18:35
categories: python braze ruby rails mongo

For those who have been keeping score, I've been on somewhat of an extended abscence, especially since October of last year. Much of it was the result of events in my personal life which I'll not discuss here. Regardless, consider this my comeback announcement. I plan to return to writing regularly, hoping to match the pace of 2014 or so, which already seems so long ago. Heck, [Writing Idiomatic Python](https://jeffknupp.com/writing-idiomatic-python-ebook) is three months older than my oldest daughter, and she just started Kindergarten this year. So it's been a while since I've been producing (I think) useful or interesting content at a reliable pace, and this is my attempt to change that.

## Slightly Less Personal News

### Braze

At the end of July of this year I joined [Braze (formerly Appboy)](https://www.braze.com) as a Senior Engineer in my return to being an IC. Management was fun but somewhat thrust upon me. I wanted to take a more measured approach.

I couldn't have found a better match. Braze counts some of the biggest brands in the world (how about Gap, Microsoft, Dominos, ABC News, NASCAR, Lyft, Venmo, HBO, Burger King to give you a sense of breadth of industry ) as users of their software platform that allows these brands to manage their mobile marketing strategies. And though you probably haven't heard of them, they are no small player: [#21 On Deloitte's Annual Fast 500 (of the 500 fastest growing technology companies in America)](https://www2.deloitte.com/us/en/pages/technology-media-and-telecommunications/articles/fast500-winners.html), [A "Leader" in the 2018 Garnter Magic Quadrant Survey of Mobile Marketing Platforms (and that's from a field of companies that included Salesforce, IBM, and Oracle)](https://www.braze.com/resources/library/report/gartner-magic-quadrant-2018/), and profiled by publications like Fortune and Inc. They've built an incredible company full of nice, thoughtful people who genuinely care about the product they work on and services they offer.

So what does it do? And what do I now do? I'm glad you asked.

Braze's product is a B2B SaaS product, which is a fancy way of saying a web-based app sold directly to businesses and not individuals. Companys that purchase the product have marketing departments with more money and employees than most startups. Of course, there are a lot of mediums in which to market one's self: TV, outdoor adspace, radio, print media, etc. And, oh yeah, **digital**. You know, the primary way you interact every day with almost any brand? Suffice it to say the digital marketing is a **big** industry.

But how does one go about creating, managing, and implementing their strategy? A large brand may have a dozen email-based marketing campaigns going at one time with new ones starting all the time. But they also have push notification and in-app message campaigns for their mobile apps, and web push/browser campaigns for their website. A customer can use Braze's platform to create, manage, and actually *run* (i.e. send the emails, push notifications, etc. to the actual end user's device) all of those campaigns. And what about all that data that gets generated, the kind capable of answering questions like "who bought something (and what did they buy) within 3 days of receiving this notification on their phone?" or "what's the most effective messaging channel to reach my female customers from Canada who are over 35 and have used my mobile app at least three times in the past week"? All of that is collected, analyzed, presented, and ultimately fed back into the product itself, as well as to the company itself.

Adding features to that web application and owning the backend platform, which is responsible for actually sending all those messages and managing the lifecycles of automated marketing campaigns, is the responsiblity of my team. And it's all in Ruby on Rails and in Javascript. No, I'm not joking. I'm working on an RoR app (including frontend development), having never used Ruby, as a guy who's known as a "Python Guy". **And I couldn't be happier.**

What the engineering team at Braze has been able to accomplish using RoR, mongo, redis, memcached, and [sidekiq](https://sidekiq.org/) (a distributed task execution framework along the same lines as Celery for you Python folk, which Braze co-founder and CTO [Jon Hyman](https://github.com/jonhyman) happens to be one of the main contributors to), is nothing short of remarkable. Aside from a few Go microservices acting as the last mile before sending *billions of messages a month* and some Java for data processing and integrations, the entire platform is a single Rails app. And they've been able to scale that app in ways that would make John Carmack smile. In terms of sheer amount of storage and compute power used, it's the largest distributed system I've ever worked on (algorithmic trading systems, which I started my career building at Goldman Sachs in 2005, were *somewhat* distributed back then but more often just sharded instances of the same application that didn't share any data).

But then, it's also 2018.

Microservices developed and deployed at the speed and scale we see today simply weren't feasible until farely recently. There was a sticky problem: orchestration. Before the orchestration tools we have today existed, the increase in maintenance and support effort to deploy a new service was quite high in most organizations. But almost no effort is required to do so with today's orchestration tools. At whiteboards around the world, engineers are discussing ways to break up their monolithic application into a series of disparate services with focused responsibilities and well-defined interfaces. And Braze is no different.

As an engineer who loves working on distributed systems, there are two really fun times to work on them: when they are first being built or when they've hit an inflection point and need to scale in ways that require rethinking *everything*. And "scale" here doesn't just mean "process more data". It also means "support concurrent development by dozens of developers" and "decrease our maintenance and support burden". Those are the opportunities I live for, and that's why I'm so excited to be at Braze.

Yes, yes, I know. "The Python guy is working on a Ruby on Rails app?". To be completely honest, it's only been in the past few years have I used it professionally. So in terms of my earlier "comeback" announcement, the fact that I'm not writing Python at work doesn't mean I'm not writing it, and I do and will have plenty to of topics to discuss on all things Python. Because Python is reaching an inflection point as well, and learning Python concepts and how to think about the writing code has never been a hotter (nor more important) topic.

One of the best parts of working on distributed systems is that it's a constantly shifting landscape. I don't think there's ever been a downward movement in the average amount of memory and CPU used by applications, and I can't imagine there being one in my lifetime. We're always pushing the boundaries of how much data we can store and process. And every so often there are techtonic shifts in the way we approach building distributed systems (which, at the end of the day, are almost unanimously based off of ideas that have been discussed since the 60's or so). We're in the middle of one of those right now. It's containers and orchestration tools and the cloud. And it's the new normal.

**There are 5 engineers on that team, including myself.** In all, Braze has comfortably *less than 50 engineers*. It took a while for that to sink in for me. I didn't appreciate how *insanely incredible* it is that this web application, the platform responsible for sending *billions* of messages a month, the mobile SDKs we provide for our customers, the data analysis and partner integrations and web API servers receiving tens of thousands of requests per seconds, **that is to say *all of this*** was built by no more than 30 or so people.

Almost more amazing is the architecture. Suffice it to say that almost everything I just mentioned is powered by *a single Ruby on Rails app*. And that "RoR app" is one of the single largest distributed systems I've ever worked on. It uses Mongo and Redis in amazing ways. Mongo is responsible for storing user and application data; the sharding, caching, and orchestration strategy that makes all that data avaiable instantly to any application instance is truly a thing of engineering beauty. And Redis is used to power 
